<!DOCTYPE html>
<html>
    <head>
        <title>Uceni se s D3js</title>
        <meta charset="windows-1250">

        <script src="http://service.ihned.cz/js/modernizr/v2.6.2.svg.min.js"></script>
        <script src="http://service.ihned.cz/js/jquery.min.js"></script>
        <script src="http://service.ihned.cz/js/d3/v3.2.8.min.js"></script>

        <style>		
            div.bar {
                display: inline-block;
                width: 20px;
                height: 75px;	/* Gets overriden by D3-assigned height below */
                margin-right: 2px;
                background-color: teal;
            }
            .container.c1 div.bar {
                background-color: red;
            }
        </style>

    </head>
    <body>

        <form>
            <label><input type="radio" name="mode" value="pocet" checked>Poèet</label>
            <label><input type="radio" name="mode" value="procenta">Procenta</label>
        </form>

        <script>

            var margin = {top: 20, right: 80, bottom: 30, left: 50},
            width = 960 - margin.left - margin.right, height = 500 - margin.top - margin.bottom;

            var svg = d3.select("body").append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


            var data_popisek = [];
            var data_veu = [];
            var data_mimoeu = [];
            // ----------------------------------------------------
            d3.tsv("data/data.tsv", function(error, data) {
                data.forEach(function(d) {
                    d.Kvartal;
                    d["v EU"] = +d["v EU"]; // +d (pretypovani na cislo v JavaScriptu)
                    d["mimo EU"] = +d["mimo EU"];

                    data_popisek.push(d.Kvartal);
                    data_veu.push(d["v EU"]);
                    data_mimoeu.push(d["mimo EU"]);
                });

                console.log(data_popisek);
                console.log(data_veu);
                console.log(data_mimoeu);

                /*
                 d3.select("body").selectAll("div.container")
                 .data([data_veu, data_mimoeu])
                 .enter()
                 .append("div")
                 .attr("class", function(d, index) {
                 return ("container c" + index);
                 })
                 
                 .selectAll("div.container")
                 .data(function(d) {
                 return d;
                 })
                 .enter()
                 .append("div")
                 .attr("class", "bar")
                 
                 .style("height", function(d) {
                 var barHeight = d * 5;
                 return barHeight + "px";
                 });
                 */

            });


/*
            d3.selectAll("input").on("change", change);
            var timeout = setTimeout(function() {
                d3.select("input[value=\"procenta\"]").property("checked", true).each(change);
            }, 2000);

            function change() {
                clearTimeout(timeout);

                city = this.value;

                // First transition the line & label to the new city.
                var t0 = svg.transition().duration(750);
                t0.selectAll(".line").attr("d", line);
                t0.selectAll(".label").attr("transform", transform).text(city);

                // Then transition the y-axis.
                y.domain(d3.extent(data, function(d) {
                    return d[city];
                }));
                var t1 = t0.transition();
                t1.selectAll(".line").attr("d", line);
                t1.selectAll(".label").attr("transform", transform);
                t1.selectAll(".y.axis").call(yAxis);
            }

            function transform(d) {
                return "translate(" + x(d.date) + "," + y(d[city]) + ")";
            }
            */
        </script>


    </body>
</html>
